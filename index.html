<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="google-adsense-account" content="ca-pub-1642749702806306">
    <title>ğŸ¨ ê·€ì—¬ìš´ MBTI í…ŒìŠ¤íŠ¸</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1642749702806306"
     crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #FF6B9D;
            --secondary: #C44569;
            --accent: #FEC8D8;
            --background: #FFF5F7;
            --text-dark: #2C3E50;
            --text-light: #7F8C8D;
            --neutral: #9CA3AF;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #FFF5F7 0%, #FFE5EC 100%);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -webkit-touch-callout: none;
        }

        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        .card {
            max-width: 800px;
            width: 100%;
            background: white;
            padding: 60px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Home Page */
        .home-title {
            font-size: 3.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: bounce 2s ease-in-out infinite;
        }

        .home-subtitle {
            font-size: 1.3rem;
            color: var(--text-light);
            text-align: center;
            margin-bottom: 50px;
        }

        .feature-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }

        .feature-card {
            text-align: center;
            padding: 30px 20px;
            background: var(--background);
            border-radius: 20px;
            transition: transform 0.3s;
        }

        .feature-card:hover { transform: translateY(-10px); }

        .feature-emoji {
            font-size: 3rem;
            margin-bottom: 15px;
            animation: pulse 2s ease-in-out infinite;
        }

        .feature-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 50px;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            box-shadow: 0 10px 30px rgba(255, 107, 157, 0.3);
            transition: all 0.3s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 107, 157, 0.4);
        }

        /* Test Page */
        .progress-bar {
            width: 100%;
            height: 12px;
            background: #F0F0F0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            transition: width 0.5s;
        }

        .progress-text {
            text-align: right;
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 40px;
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 40px;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option-btn {
            width: 100%;
            background: white;
            border: 3px solid #F0F0F0;
            padding: 20px 25px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.05rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
        }

        .option-btn:hover {
            border-color: var(--accent);
            background: var(--background);
            transform: translateX(8px);
        }

        .option-btn:active {
            transform: scale(0.98);
        }

        .option-btn:focus {
            outline: none;
        }

        /* ì„ íƒëœ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (CSS í´ë˜ìŠ¤ë¡œ ê´€ë¦¬) */
        .option-btn.selected {
            border-color: var(--primary) !important;
            background: var(--background) !important;
            transform: scale(0.98) !important;
        }

        .option-emoji {
            font-size: 2rem;
            flex-shrink: 0;
        }

        /* Score Bar Styles */
        .score-section {
            margin-bottom: 40px;
        }

        .score-item {
            margin-bottom: 30px;
        }

        .score-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .score-bar-container {
            display: flex;
            align-items: center;
            gap: 10px;
            height: 40px;
        }

        .score-bar {
            flex: 1;
            height: 100%;
            background: #F0F0F0;
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .score-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            transition: width 0.8s ease-out;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: 700;
        }

        .score-label {
            min-width: 80px;
            text-align: center;
            font-weight: 600;
            color: var(--text-dark);
        }

        .borderline-badge {
            display: inline-block;
            background: linear-gradient(135deg, #FEC8D8 0%, #FFE5EC 100%);
            color: var(--secondary);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            border: 2px solid var(--accent);
            margin-left: 10px;
        }

        /* Result Page */
        .result-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .result-announcement {
            font-size: 2rem;
            margin-bottom: 30px;
        }

        .result-type-badge {
            display: inline-flex;
            align-items: center;
            gap: 15px;
            padding: 20px 40px;
            border-radius: 50px;
            margin-bottom: 20px;
        }

        .result-emoji {
            font-size: 4rem;
        }

        .result-type {
            font-size: 3rem;
            font-weight: 700;
            color: white;
            letter-spacing: 2px;
        }

        .result-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .result-description {
            font-size: 1.2rem;
            color: var(--text-light);
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .characteristic-item {
            background: var(--background);
            padding: 15px 20px;
            border-radius: 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .check-icon {
            color: var(--primary);
            font-weight: 700;
            font-size: 1.2rem;
        }

        .tags-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .tag {
            padding: 12px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .strength-tag {
            background: #E6FFFA;
            color: #047857;
            border: 2px solid #10B981;
        }

        .weakness-tag {
            background: #FFF5F5;
            color: #B91C1C;
            border: 2px solid #EF4444;
        }

        .compatibility-item {
            background: linear-gradient(135deg, var(--background) 0%, white 100%);
            padding: 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 2px solid var(--accent);
            margin-bottom: 15px;
        }

        .compat-emoji {
            font-size: 2.5rem;
        }

        .compat-type {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
            min-width: 80px;
        }

        .compat-title {
            color: var(--text-light);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 50px;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .btn-secondary:hover {
            transform: translateY(-5px);
        }

        /* Ad Modal Styles */
        .ad-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s;
        }

        .ad-content {
            background: white;
            padding: 60px 40px;
            border-radius: 30px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            animation: slideUp 0.5s;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ad-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--primary);
        }

        .ad-description {
            font-size: 1.1rem;
            color: var(--text-light);
            margin-bottom: 30px;
        }

        .ad-countdown {
            font-size: 4rem;
            font-weight: 700;
            color: var(--primary);
            margin: 30px 0;
            animation: pulse 1s ease-in-out infinite;
        }

        .ad-progress-bar {
            width: 100%;
            height: 20px;
            background: #F0F0F0;
            border-radius: 10px;
            overflow: hidden;
            margin: 30px 0;
        }

        .ad-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            transition: width 1s linear;
        }

        .premium-unlock-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 20px 50px;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            display: block;
            margin: 40px auto 0;
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
            transition: all 0.3s;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        .premium-unlock-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.4);
        }

        .premium-badge {
            display: inline-block;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.3);
        }

        .basic-result {
            text-align: center;
            padding: 40px;
        }

        .unlock-section {
            background: linear-gradient(135deg, var(--background) 0%, white 100%);
            padding: 40px;
            border-radius: 20px;
            margin-top: 40px;
            border: 3px dashed var(--accent);
        }

        .unlock-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .unlock-features {
            text-align: left;
            margin: 30px 0;
        }

        .unlock-feature-item {
            padding: 15px 20px;
            margin-bottom: 10px;
            background: white;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .unlock-icon {
            font-size: 2rem;
        }

        @media (max-width: 768px) {
            .card {
                padding: 40px 20px;
            }
            .home-title {
                font-size: 2.5rem;
            }
            .question-text {
                font-size: 1.5rem;
            }
            .result-type {
                font-size: 2rem;
            }
            .action-buttons {
                flex-direction: column;
            }
            .score-bar-container {
                gap: 5px;
            }
            .score-label {
                min-width: 60px;
                font-size: 0.85rem;
            }
            .score-bar-fill {
                font-size: 0.9rem;
                padding-right: 10px;
            }
            .score-header {
                font-size: 0.9rem;
            }
            .ad-content {
                padding: 40px 30px;
            }
            .ad-title {
                font-size: 1.5rem;
            }
            .ad-countdown {
                font-size: 3rem;
            }
            .option-btn {
                padding: 18px 20px;
                font-size: 0.95rem;
            }
            .option-emoji {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // ğŸ¨ MBTI í…ŒìŠ¤íŠ¸ v2.0 - 3ì  ì²™ë„ + 25ë¬¸í•­ ì‹œìŠ¤í…œ
        // ì •ë°€ë„ í–¥ìƒ: ì•„ë‹ˆë‹¤(-1), ë³´í†µ(0), ê·¸ë ‡ë‹¤(+1)
        
        const questions = [
            // E/I ì¶• (7ë¬¸í•­) - ì™¸í–¥ì„±/ë‚´í–¥ì„±
            {
                id: 1,
                axis: 'EI',
                question: "ì£¼ë§ì— ì¹œêµ¬ë“¤ì´ ê°‘ìê¸° ë†€ìê³  í•  ë•Œ?",
                options: [
                    { text: "ì¢‹ì•„! ë°”ë¡œ ì¤€ë¹„!", type: "E", value: 1, emoji: "ğŸ‰" },
                    { text: "ìƒí™©ì— ë”°ë¼ ë‹¤ë¦„", type: "N", value: 0, emoji: "ğŸ¤”" },
                    { text: "ì§‘ì—ì„œ ì‰¬ê³  ì‹¶ì–´", type: "I", value: -1, emoji: "ğŸ " }
                ]
            },
            {
                id: 2,
                axis: 'EI',
                question: "íŒŒí‹°ì— ê°”ì„ ë•Œ ë‚˜ëŠ”?",
                options: [
                    { text: "ì—¬ëŸ¬ ì‚¬ëŒê³¼ ëŒ€í™”", type: "E", value: 1, emoji: "ğŸ¥³" },
                    { text: "ì ë‹¹íˆ ì„ì—¬ì„œ", type: "N", value: 0, emoji: "ğŸ˜Š" },
                    { text: "ì¹œí•œ ì‚¬ëŒ ì˜†ì—", type: "I", value: -1, emoji: "ğŸ‘¥" }
                ]
            },
            {
                id: 3,
                axis: 'EI',
                question: "ì•½ì†ì´ ì·¨ì†Œëì„ ë•Œ?",
                options: [
                    { text: "ë‹¤ë¥¸ ì•½ì† ì¡ê¸°", type: "E", value: 1, emoji: "â˜€ï¸" },
                    { text: "ê·¸ëƒ¥ ê·¸ëŸ¬ë ¤ë‹ˆ", type: "N", value: 0, emoji: "ğŸ†—" },
                    { text: "ì˜¤íˆë ¤ ì¢‹ì•„!", type: "I", value: -1, emoji: "ğŸŒ™" }
                ]
            },
            {
                id: 4,
                axis: 'EI',
                question: "ì—ë„ˆì§€ ì¶©ì „ ë°©ë²•ì€?",
                options: [
                    { text: "ì‚¬ëŒë“¤ê³¼ ë§Œë‚¨", type: "E", value: 1, emoji: "ğŸŠ" },
                    { text: "ë•Œì— ë”°ë¼ ë‹¤ë¦„", type: "N", value: 0, emoji: "âš–ï¸" },
                    { text: "í˜¼ìë§Œì˜ ì‹œê°„", type: "I", value: -1, emoji: "ğŸ“š" }
                ]
            },
            {
                id: 5,
                axis: 'EI',
                question: "ìƒˆë¡œìš´ í™˜ê²½ì—ì„œ?",
                options: [
                    { text: "ë¨¼ì € ë‹¤ê°€ê°€ê¸°", type: "E", value: 1, emoji: "ğŸ‘‹" },
                    { text: "ìì—°ìŠ¤ëŸ½ê²Œ", type: "N", value: 0, emoji: "ğŸ™‚" },
                    { text: "ì¡°ìš©íˆ ê´€ì°°", type: "I", value: -1, emoji: "ğŸ‘€" }
                ]
            },
            {
                id: 6,
                axis: 'EI',
                question: "ê¸´ íšŒì˜ í›„ ê¸°ë¶„ì€?",
                options: [
                    { text: "ë” ì–˜ê¸°í•˜ê³  ì‹¶ì–´", type: "E", value: 1, emoji: "ğŸ’¬" },
                    { text: "ì ë‹¹íˆ ì§€ì¹¨", type: "N", value: 0, emoji: "ğŸ˜" },
                    { text: "ì™„ì „ í”¼ê³¤í•´", type: "I", value: -1, emoji: "ğŸ˜´" }
                ]
            },
            {
                id: 7,
                axis: 'EI',
                question: "ì „í™” vs ë©”ì‹œì§€?",
                options: [
                    { text: "ì „í™”ê°€ í¸í•´", type: "E", value: 1, emoji: "ğŸ“" },
                    { text: "ìƒí™©ì— ë”°ë¼", type: "N", value: 0, emoji: "ğŸ“±" },
                    { text: "ë©”ì‹œì§€ê°€ ì¢‹ì•„", type: "I", value: -1, emoji: "ğŸ’¬" }
                ]
            },

            // S/N ì¶• (7ë¬¸í•­) - ê°ê°/ì§ê´€
            {
                id: 8,
                axis: 'SN',
                question: "ì˜í™” ë³¼ ë•Œ?",
                options: [
                    { text: "ê·¸ëƒ¥ ì¬ë¯¸ìˆê²Œ", type: "S", value: -1, emoji: "ğŸ¬" },
                    { text: "ë‘˜ ë‹¤ ì„ì—¬ì„œ", type: "N", value: 0, emoji: "ğŸ­" },
                    { text: "ì˜ë¯¸/ë³µì„  ë¶„ì„", type: "N", value: 1, emoji: "ğŸ”®" }
                ]
            },
            {
                id: 9,
                axis: 'SN',
                question: "ìƒˆë¡œìš´ ê²ƒ ë°°ìš¸ ë•Œ?",
                options: [
                    { text: "ì¼ë‹¨ í•´ë³´ê¸°", type: "S", value: -1, emoji: "âš¡" },
                    { text: "ì ì ˆíˆ ë³‘í–‰", type: "N", value: 0, emoji: "ğŸ¯" },
                    { text: "ì›ë¦¬ë¶€í„° ì´í•´", type: "N", value: 1, emoji: "ğŸ“š" }
                ]
            },
            {
                id: 10,
                axis: 'SN',
                question: "ëŒ€í™”í•  ë•Œ?",
                options: [
                    { text: "êµ¬ì²´ì  ì‚¬ì‹¤", type: "S", value: -1, emoji: "ğŸ“Š" },
                    { text: "ìƒí™©ì— ë”°ë¼", type: "N", value: 0, emoji: "ğŸ’­" },
                    { text: "ê°€ëŠ¥ì„±/ì˜ë¯¸", type: "N", value: 1, emoji: "ğŸŒŸ" }
                ]
            },
            {
                id: 11,
                axis: 'SN',
                question: "ì„¤ëª…ì„œ ì½ê¸°?",
                options: [
                    { text: "ê¼¼ê¼¼íˆ ì½ìŒ", type: "S", value: -1, emoji: "ğŸ“„" },
                    { text: "í•„ìš”í•œ ë¶€ë¶„ë§Œ", type: "N", value: 0, emoji: "ğŸ“–" },
                    { text: "ëŒ€ì¶© ê°ìœ¼ë¡œ", type: "N", value: 1, emoji: "ğŸ’¡" }
                ]
            },
            {
                id: 12,
                axis: 'SN',
                question: "ë¬¸ì œ í•´ê²° ë°©ì‹?",
                options: [
                    { text: "ê²€ì¦ëœ ë°©ë²•", type: "S", value: -1, emoji: "âœ…" },
                    { text: "ìƒí™© ë³´ê³ ", type: "N", value: 0, emoji: "ğŸ”„" },
                    { text: "ìƒˆë¡œìš´ ë°©ë²•", type: "N", value: 1, emoji: "ğŸ’¡" }
                ]
            },
            {
                id: 13,
                axis: 'SN',
                question: "ë¯¸ë˜ë¥¼ ìƒê°í•  ë•Œ?",
                options: [
                    { text: "í˜„ì‹¤ì  ê³„íš", type: "S", value: -1, emoji: "ğŸ“…" },
                    { text: "ì ì ˆíˆ ì„ì–´ì„œ", type: "N", value: 0, emoji: "ğŸ¯" },
                    { text: "í° ê·¸ë¦¼/ê°€ëŠ¥ì„±", type: "N", value: 1, emoji: "ğŸŒˆ" }
                ]
            },
            {
                id: 14,
                axis: 'SN',
                question: "ì´ì•¼ê¸°ë¥¼ í•  ë•Œ?",
                options: [
                    { text: "ìˆœì„œëŒ€ë¡œ ìì„¸íˆ", type: "S", value: -1, emoji: "ğŸ“" },
                    { text: "ì ë‹¹íˆ", type: "N", value: 0, emoji: "ğŸ’¬" },
                    { text: "ê²°ë¡ /í•µì‹¬ë§Œ", type: "N", value: 1, emoji: "â­" }
                ]
            },

            // T/F ì¶• (6ë¬¸í•­) - ì‚¬ê³ /ê°ì •
            {
                id: 15,
                axis: 'TF',
                question: "ì¹œêµ¬ ê³ ë¯¼ ìƒë‹´?",
                options: [
                    { text: "í•´ê²°ì±… ì œì‹œ", type: "T", value: 1, emoji: "ğŸ’¡" },
                    { text: "ìƒí™©ì— ë”°ë¼", type: "N", value: 0, emoji: "ğŸ¤" },
                    { text: "ê³µê°/ìœ„ë¡œ", type: "F", value: -1, emoji: "ğŸ’•" }
                ]
            },
            {
                id: 16,
                axis: 'TF',
                question: "ì˜ê²¬ ì¶©ëŒ ì‹œ?",
                options: [
                    { text: "ë…¼ë¦¬ì  ì„¤ë“", type: "T", value: 1, emoji: "ğŸ§ " },
                    { text: "ìƒí™©ì— ë§ê²Œ", type: "N", value: 0, emoji: "ğŸ”„" },
                    { text: "ê¸°ë¶„ ë¨¼ì €", type: "F", value: -1, emoji: "ğŸŒ¸" }
                ]
            },
            {
                id: 17,
                axis: 'TF',
                question: "ê²°ì •ì„ ë‚´ë¦´ ë•Œ?",
                options: [
                    { text: "ì‚¬ì‹¤/ë…¼ë¦¬", type: "T", value: 1, emoji: "ğŸ“" },
                    { text: "ê· í˜•ìˆê²Œ", type: "N", value: 0, emoji: "âš–ï¸" },
                    { text: "ê°ì •/ê´€ê³„", type: "F", value: -1, emoji: "â¤ï¸" }
                ]
            },
            {
                id: 18,
                axis: 'TF',
                question: "ì‹¤ìˆ˜í•œ ì¹œêµ¬ì—ê²Œ?",
                options: [
                    { text: "ê°œì„  ë°©ë²•", type: "T", value: 1, emoji: "ğŸ‘¨â€ğŸ«" },
                    { text: "ì ì ˆíˆ", type: "N", value: 0, emoji: "ğŸ‘" },
                    { text: "ê²©ë ¤/ìœ„ë¡œ", type: "F", value: -1, emoji: "ğŸ¤—" }
                ]
            },
            {
                id: 19,
                axis: 'TF',
                question: "ë¹„íŒì„ ë“¤ìœ¼ë©´?",
                options: [
                    { text: "ê°ê´€ì  ê²€í† ", type: "T", value: 1, emoji: "ğŸ¯" },
                    { text: "ìƒí™©ì— ë”°ë¼", type: "N", value: 0, emoji: "ğŸ¤”" },
                    { text: "ê°ì •ì  ë°˜ì‘", type: "F", value: -1, emoji: "ğŸ˜¢" }
                ]
            },
            {
                id: 20,
                axis: 'TF',
                question: "ì˜í™” ì„ íƒ ê¸°ì¤€?",
                options: [
                    { text: "í‰ì /ë¦¬ë·°", type: "T", value: 1, emoji: "â­" },
                    { text: "ë‘˜ ë‹¤ ê³ ë ¤", type: "N", value: 0, emoji: "ğŸ¬" },
                    { text: "ê°ì •/ëŠë‚Œ", type: "F", value: -1, emoji: "ğŸ’" }
                ]
            },

            // J/P ì¶• (5ë¬¸í•­) - íŒë‹¨/ì¸ì‹
            {
                id: 21,
                axis: 'JP',
                question: "í”„ë¡œì íŠ¸ ì‹œì‘í•  ë•Œ?",
                options: [
                    { text: "ê³„íšë¶€í„°", type: "J", value: 1, emoji: "ğŸ“‹" },
                    { text: "ëŒ€ëµ êµ¬ìƒ", type: "N", value: 0, emoji: "ğŸ“" },
                    { text: "ì¼ë‹¨ ì‹œì‘", type: "P", value: -1, emoji: "ğŸ¨" }
                ]
            },
            {
                id: 22,
                axis: 'JP',
                question: "ì—¬í–‰ ìŠ¤íƒ€ì¼?",
                options: [
                    { text: "ì¼ì •í‘œ ì‘ì„±", type: "J", value: 1, emoji: "âœˆï¸" },
                    { text: "í•µì‹¬ë§Œ ê³„íš", type: "N", value: 0, emoji: "ğŸ—ºï¸" },
                    { text: "ì¦‰í¥ì ìœ¼ë¡œ", type: "P", value: -1, emoji: "ğŸ’" }
                ]
            },
            {
                id: 23,
                axis: 'JP',
                question: "ê³¼ì œ/ì—…ë¬´ ì²˜ë¦¬?",
                options: [
                    { text: "ë¯¸ë¦¬ë¯¸ë¦¬", type: "J", value: 1, emoji: "âœ…" },
                    { text: "ì ë‹¹í•œ ë•Œ", type: "N", value: 0, emoji: "â°" },
                    { text: "ë§ˆê° ì§ì „", type: "P", value: -1, emoji: "ğŸ”¥" }
                ]
            },
            {
                id: 24,
                axis: 'JP',
                question: "ì£¼ë§ ê³„íš?",
                options: [
                    { text: "ë¯¸ë¦¬ ê³„íš", type: "J", value: 1, emoji: "ğŸ“…" },
                    { text: "ëŒ€ëµ ìƒê°", type: "N", value: 0, emoji: "ğŸ¤·" },
                    { text: "ê·¸ë•Œê·¸ë•Œ", type: "P", value: -1, emoji: "ğŸ²" }
                ]
            },
            {
                id: 25,
                axis: 'JP',
                question: "ì •ë¦¬ ì •ëˆ?",
                options: [
                    { text: "í•­ìƒ ê¹”ë”", type: "J", value: 1, emoji: "ğŸ§¹" },
                    { text: "ì ë‹¹íˆ ìœ ì§€", type: "N", value: 0, emoji: "ğŸ“¦" },
                    { text: "í•„ìš”í•  ë•Œë§Œ", type: "P", value: -1, emoji: "ğŸŒ€" }
                ]
            }
        ];

        const mbtiResults = {
            INTJ: {
                type: 'INTJ', title: 'ì „ëµê°€', emoji: 'ğŸ§™â€â™‚ï¸', color: '#6B46C1',
                description: 'ë…ì°½ì ì´ê³  ì „ëµì ì¸ ì‚¬ê³ ë¥¼ ê°€ì§„ ì™„ë²½ì£¼ì˜ì',
                characteristics: ['ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ', 'ë…ë¦½ì ì´ê³  ìê¸°ì£¼ë„ì ', 'ì¥ê¸°ì  ë¹„ì „ ì¶”êµ¬', 'ì™„ë²½ì£¼ì˜ ì„±í–¥'],
                strengths: ['ì „ëµì  ì‚¬ê³ ', 'ë…ì°½ì„±', 'ìê¸°í™•ì‹ ', 'ê²°ë‹¨ë ¥'],
                weaknesses: ['ê°ì •í‘œí˜„ ì„œíˆ´', 'ë¹„íŒì ', 'ì™„ë²½ì£¼ì˜', 'íƒ€í˜‘ ì–´ë ¤ì›€'],
                compatibility: ['ENFP', 'ENTP', 'INFJ']
            },
            INTP: {
                type: 'INTP', title: 'ë…¼ë¦¬ìˆ ì‚¬', emoji: 'ğŸ”¬', color: '#4299E1',
                description: 'í˜¸ê¸°ì‹¬ ë§ê³  í˜ì‹ ì ì¸ ë°œëª…ê°€',
                characteristics: ['ë…¼ë¦¬ì ì´ê³  ê°ê´€ì ', 'í˜¸ê¸°ì‹¬ì´ ë§ìŒ', 'ë…ì°½ì ì¸ ì•„ì´ë””ì–´', 'ë¶„ì„ì  ì‚¬ê³ '],
                strengths: ['ë…¼ë¦¬ì  ë¶„ì„', 'ì°½ì˜ì„±', 'ê°ê´€ì„±', 'ë¬¸ì œí•´ê²°ë ¥'],
                weaknesses: ['ì‚°ë§Œí•¨', 'ê°ì • ë¬´ì‹œ', 'ì‹¤í–‰ë ¥ ë¶€ì¡±', 'ì‚¬íšŒì„± ë¶€ì¡±'],
                compatibility: ['ENTJ', 'ESTJ', 'INFJ']
            },
            ENTJ: {
                type: 'ENTJ', title: 'í†µì†”ì', emoji: 'ğŸ‘‘', color: '#D53F8C',
                description: 'ëŒ€ë‹´í•˜ê³  ìƒìƒë ¥ì´ í’ë¶€í•œ ë¦¬ë”',
                characteristics: ['ì¹´ë¦¬ìŠ¤ë§ˆ ìˆëŠ” ë¦¬ë”ì‹­', 'íš¨ìœ¨ì„± ì¶”êµ¬', 'ëª©í‘œ ì§€í–¥ì ', 'ê²°ë‹¨ë ¥ ìˆìŒ'],
                strengths: ['ë¦¬ë”ì‹­', 'ì „ëµì  ì‚¬ê³ ', 'íš¨ìœ¨ì„±', 'ìì‹ ê°'],
                weaknesses: ['ê°•ì••ì ', 'ê°ì • ë¬´ì‹œ', 'ì°¸ì„ì„± ë¶€ì¡±', 'ë¹„íŒì '],
                compatibility: ['INTP', 'INFP', 'INTJ']
            },
            ENTP: {
                type: 'ENTP', title: 'ë³€ë¡ ê°€', emoji: 'ğŸ­', color: '#ED8936',
                description: 'ì˜ë¦¬í•˜ê³  í˜¸ê¸°ì‹¬ ë§ì€ í† ë¡ ê°€',
                characteristics: ['ì¬ì¹˜ìˆê³  ë˜‘ë˜‘í•¨', 'í† ë¡ ì„ ì¦ê¹€', 'í˜ì‹ ì ì¸ ì‚¬ê³ ', 'ë„ì „ì '],
                strengths: ['ì°½ì˜ì„±', 'ë…¼ë¦¬ë ¥', 'ì ì‘ë ¥', 'ì—´ì •'],
                weaknesses: ['ë…¼ìŸì ', 'ì§‘ì¤‘ë ¥ ë¶€ì¡±', 'ê·œì¹™ ë¬´ì‹œ', 'ë¯¼ê°ì„± ë¶€ì¡±'],
                compatibility: ['INFJ', 'INTJ', 'ENFP']
            },
            INFJ: {
                type: 'INFJ', title: 'ì˜¹í˜¸ì', emoji: 'ğŸ¦„', color: '#38B2AC',
                description: 'ì´ìƒì£¼ì˜ì ì´ê³  ì›ì¹™ì£¼ì˜ì ì¸ ì„ êµ¬ì',
                characteristics: ['ì´ìƒì£¼ì˜ì ', 'í†µì°°ë ¥ì´ ë›°ì–´ë‚¨', 'í—Œì‹ ì ', 'ì›ì¹™ì£¼ì˜'],
                strengths: ['í†µì°°ë ¥', 'ì°½ì˜ì„±', 'í—Œì‹ ', 'ì´ìƒì£¼ì˜'],
                weaknesses: ['ì™„ë²½ì£¼ì˜', 'ì˜ˆë¯¼í•¨', 'ë²ˆì•„ì›ƒ', 'ë¹„í˜„ì‹¤ì '],
                compatibility: ['ENFP', 'ENTP', 'INTJ']
            },
            INFP: {
                type: 'INFP', title: 'ì¤‘ì¬ì', emoji: 'ğŸŒˆ', color: '#F687B3',
                description: 'ì´ìƒì£¼ì˜ì ì´ê³  ì¶©ì„±ìŠ¤ëŸ¬ìš´ ë‚­ë§Œì£¼ì˜ì',
                characteristics: ['ì´ìƒì£¼ì˜ì ', 'ì°½ì˜ì ', 'ê³µê° ëŠ¥ë ¥ ë›°ì–´ë‚¨', 'ê°€ì¹˜ ì§€í–¥ì '],
                strengths: ['ì°½ì˜ì„±', 'ê³µê° ëŠ¥ë ¥', 'ì´ìƒì£¼ì˜', 'ì¶©ì„±ì‹¬'],
                weaknesses: ['ë¹„í˜„ì‹¤ì ', 'ê³¼ë„í•œ ì´ìƒí™”', 'ìê¸°ë¹„íŒ', 'ìŠ¤íŠ¸ë ˆìŠ¤ ì·¨ì•½'],
                compatibility: ['ENFJ', 'ENTJ', 'INFJ']
            },
            ENFJ: {
                type: 'ENFJ', title: 'ì„ ë„ì', emoji: 'âœ¨', color: '#48BB78',
                description: 'ì¹´ë¦¬ìŠ¤ë§ˆ ìˆê³  ì˜ê°ì„ ì£¼ëŠ” ë¦¬ë”',
                characteristics: ['íƒ€ì¸ ì§€í–¥ì ', 'ì¹´ë¦¬ìŠ¤ë§ˆ', 'ì—´ì •ì ', 'ì¡°í™” ì¶”êµ¬'],
                strengths: ['ë¦¬ë”ì‹­', 'ê³µê° ëŠ¥ë ¥', 'ì†Œí†µë ¥', 'ì—´ì •'],
                weaknesses: ['ì§€ë‚˜ì¹œ í¬ìƒ', 'íƒ€ì¸ ì˜ì¡´', 'ë¹„íŒ ë¯¼ê°', 'ê²°ì • ì–´ë ¤ì›€'],
                compatibility: ['INFP', 'ISFP', 'ENFP']
            },
            ENFP: {
                type: 'ENFP', title: 'í™œë™ê°€', emoji: 'ğŸª', color: '#F6AD55',
                description: 'ì—´ì •ì ì´ê³  ì°½ì˜ì ì¸ ììœ ë¡œìš´ ì˜í˜¼',
                characteristics: ['ì—´ì •ì ', 'ì°½ì˜ì ', 'ì‚¬êµì ', 'í˜¸ê¸°ì‹¬ ë§ìŒ'],
                strengths: ['ì°½ì˜ì„±', 'ì—´ì •', 'ì†Œí†µë ¥', 'ë‚™ê´€ì„±'],
                weaknesses: ['ì§‘ì¤‘ë ¥ ë¶€ì¡±', 'ê³¼ë„í•œ ë‚™ê´€', 'ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬', 'ì‹¤í–‰ë ¥ ë¶€ì¡±'],
                compatibility: ['INTJ', 'INFJ', 'ENFJ']
            },
            ISTJ: {
                type: 'ISTJ', title: 'í˜„ì‹¤ì£¼ì˜ì', emoji: 'ğŸ“Š', color: '#2C5282',
                description: 'ì‚¬ì‹¤ì ì´ê³  ì±…ì„ê° ê°•í•œ ì‹¤ìš©ì£¼ì˜ì',
                characteristics: ['ì±…ì„ê° ê°•í•¨', 'ì¡°ì§ì ', 'í˜„ì‹¤ì ', 'ì‹ ë¢°í•  ìˆ˜ ìˆìŒ'],
                strengths: ['ì±…ì„ê°', 'ì¡°ì§ë ¥', 'ì‹ ë¢°ì„±', 'ê°ê´€ì„±'],
                weaknesses: ['ìœµí†µì„± ë¶€ì¡±', 'ë³´ìˆ˜ì ', 'ê°ì • í‘œí˜„ ì„œíˆ´', 'ë³€í™” ê±°ë¶€'],
                compatibility: ['ESFP', 'ESTP', 'ISFJ']
            },
            ISFJ: {
                type: 'ISFJ', title: 'ìˆ˜í˜¸ì', emoji: 'ğŸ›¡ï¸', color: '#5A67D8',
                description: 'í—Œì‹ ì ì´ê³  ë”°ëœ»í•œ ë³´í˜¸ì',
                characteristics: ['í—Œì‹ ì ', 'ì±…ì„ê° ê°•í•¨', 'ì„¸ì‹¬í•¨', 'ì¡°í™” ì¶”êµ¬'],
                strengths: ['í—Œì‹ ', 'ì±…ì„ê°', 'ì„¸ì‹¬í•¨', 'ì§€ì›'],
                weaknesses: ['ìê¸°ì£¼ì¥ ë¶€ì¡±', 'ë³€í™” ê±°ë¶€', 'ê³¼ë„í•œ í¬ìƒ', 'ì™„ë²½ì£¼ì˜'],
                compatibility: ['ESFP', 'ESTP', 'ISTJ']
            },
            ESTJ: {
                type: 'ESTJ', title: 'ê²½ì˜ì', emoji: 'ğŸ“ˆ', color: '#C05621',
                description: 'ë›°ì–´ë‚œ ì¡°ì§ë ¥ì„ ê°€ì§„ ê´€ë¦¬ì',
                characteristics: ['ì¡°ì§ì ', 'ì‹¤ìš©ì ', 'ì±…ì„ê°', 'ê²°ë‹¨ë ¥'],
                strengths: ['ì¡°ì§ë ¥', 'ì‹¤í–‰ë ¥', 'ì±…ì„ê°', 'íš¨ìœ¨ì„±'],
                weaknesses: ['ìœµí†µì„± ë¶€ì¡±', 'ê³ ì§‘', 'ê°ì • ë¬´ì‹œ', 'ë¹„íŒì '],
                compatibility: ['ISFP', 'ISTP', 'INTP']
            },
            ESFJ: {
                type: 'ESFJ', title: 'ì§‘ì •ê´€', emoji: 'ğŸ¤', color: '#DD6B20',
                description: 'ì‚¬êµì ì´ê³  í˜‘ì¡°ì ì¸ ì¡°ë ¥ì',
                characteristics: ['ì‚¬êµì ', 'í˜‘ì¡°ì ', 'í—Œì‹ ì ', 'ì¡°í™” ì¶”êµ¬'],
                strengths: ['ì‚¬êµì„±', 'í˜‘ì¡°', 'ì±…ì„ê°', 'ë°°ë ¤'],
                weaknesses: ['ë¹„íŒ ë¯¼ê°', 'íƒ€ì¸ ì˜ì¡´', 'ë³€í™” ê±°ë¶€', 'ì£¼ë„ì„± ë¶€ì¡±'],
                compatibility: ['ISFP', 'ISTP', 'ISTJ']
            },
            ISTP: {
                type: 'ISTP', title: 'ì¥ì¸', emoji: 'ğŸ”§', color: '#2D3748',
                description: 'ëŒ€ë‹´í•˜ê³  ì‹¤ìš©ì ì¸ ì‹¤í—˜ê°€',
                characteristics: ['ì‹¤ìš©ì ', 'ë…¼ë¦¬ì ', 'ë…ë¦½ì ', 'ìœµí†µì„±'],
                strengths: ['ë¬¸ì œí•´ê²°', 'ë…¼ë¦¬ì„±', 'ì ì‘ë ¥', 'ì‹¤ìš©ì„±'],
                weaknesses: ['ê°ì • í‘œí˜„ ì„œíˆ´', 'ë¬´ê´€ì‹¬', 'ì±…ì„íšŒí”¼', 'ê³„íšì„± ë¶€ì¡±'],
                compatibility: ['ESFJ', 'ESTJ', 'ISFP']
            },
            ISFP: {
                type: 'ISFP', title: 'ëª¨í—˜ê°€', emoji: 'ğŸ¨', color: '#9F7AEA',
                description: 'ìœ ì—°í•˜ê³  ë§¤ë ¥ì ì¸ ì˜ˆìˆ ê°€',
                characteristics: ['ì˜ˆìˆ ì ', 'ìœ ì—°í•¨', 'ê°ìˆ˜ì„±', 'ììœ ë¡œì›€'],
                strengths: ['ì°½ì˜ì„±', 'ê°ìˆ˜ì„±', 'ìœ ì—°ì„±', 'ì‹¬ë¯¸ì•ˆ'],
                weaknesses: ['ê³„íšì„± ë¶€ì¡±', 'ê²½ìŸ íšŒí”¼', 'ìê¸°ì£¼ì¥ ì•½í•¨', 'ì˜ˆë¯¼í•¨'],
                compatibility: ['ESFJ', 'ESTJ', 'ISTP']
            },
            ESTP: {
                type: 'ESTP', title: 'ì‚¬ì—…ê°€', emoji: 'âš¡', color: '#E53E3E',
                description: 'ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ëª¨í—˜ê°€',
                characteristics: ['í™œë™ì ', 'ëŒ€ë‹´í•¨', 'ì‹¤ìš©ì ', 'ìˆœë°œë ¥'],
                strengths: ['ì‹¤í–‰ë ¥', 'ì ì‘ë ¥', 'ì‚¬êµì„±', 'í˜„ì‹¤ê°ê°'],
                weaknesses: ['ê³„íšì„± ë¶€ì¡±', 'ì¶©ë™ì ', 'ìœ„í—˜ ê°ìˆ˜', 'ì¸ë‚´ì‹¬ ë¶€ì¡±'],
                compatibility: ['ISFJ', 'ISTJ', 'ESFP']
            },
            ESFP: {
                type: 'ESFP', title: 'ì—°ì˜ˆì¸', emoji: 'ğŸ‰', color: '#F56565',
                description: 'ì¦‰í¥ì ì´ê³  í™œê¸°ì°¬ ì—”í„°í…Œì´ë„ˆ',
                characteristics: ['ì‚¬êµì ', 'ì¦‰í¥ì ', 'í™œë°œí•¨', 'ë‚™ì²œì '],
                strengths: ['ì‚¬êµì„±', 'ë‚™ê´€ì„±', 'ì¦‰í¥ì„±', 'í™œë ¥'],
                weaknesses: ['ê³„íšì„± ë¶€ì¡±', 'ì§‘ì¤‘ë ¥ ë¶€ì¡±', 'ê°ˆë“± íšŒí”¼', 'ì¥ê¸° ëª©í‘œ ì•½í•¨'],
                compatibility: ['ISFJ', 'ISTJ', 'ESTP']
            }
        };

        // ì•± ìƒíƒœ
        let currentPage = 'home';
        let currentQuestion = 0;
        let answers = [];
        let scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
        let isPremium = false;
        let adCountdown = 15;
        let isProcessing = false;

        // MBTI ê³„ì‚° (3ì  ì²™ë„)
        function calculateMBTI(userAnswers) {
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            
            userAnswers.forEach((answer, index) => {
                const question = questions[index];
                const value = answer; // -1, 0, ë˜ëŠ” 1
                
                if (question.axis === 'EI') {
                    if (value > 0) scores.E += value;
                    else if (value < 0) scores.I += Math.abs(value);
                } else if (question.axis === 'SN') {
                    if (value > 0) scores.N += value;
                    else if (value < 0) scores.S += Math.abs(value);
                } else if (question.axis === 'TF') {
                    if (value > 0) scores.T += value;
                    else if (value < 0) scores.F += Math.abs(value);
                } else if (question.axis === 'JP') {
                    if (value > 0) scores.J += value;
                    else if (value < 0) scores.P += Math.abs(value);
                }
            });
            
            const mbtiType = (
                (scores.E >= scores.I ? 'E' : 'I') +
                (scores.N >= scores.S ? 'N' : 'S') +
                (scores.T >= scores.F ? 'T' : 'F') +
                (scores.J >= scores.P ? 'J' : 'P')
            );
            
            return mbtiType;
        }

        // í¼ì„¼íŠ¸ ê³„ì‚°
        function getPercentages() {
            const total = {
                EI: scores.E + scores.I,
                SN: scores.S + scores.N,
                TF: scores.T + scores.F,
                JP: scores.J + scores.P
            };

            return {
                E: Math.round((scores.E / total.EI) * 100) || 50,
                I: Math.round((scores.I / total.EI) * 100) || 50,
                S: Math.round((scores.S / total.SN) * 100) || 50,
                N: Math.round((scores.N / total.SN) * 100) || 50,
                T: Math.round((scores.T / total.TF) * 100) || 50,
                F: Math.round((scores.F / total.TF) * 100) || 50,
                J: Math.round((scores.J / total.JP) * 100) || 50,
                P: Math.round((scores.P / total.JP) * 100) || 50
            };
        }

        // ê²½ê³„í˜• íŒì • (15% ì´ë‚´ = 30% ë²”ìœ„)
        function isBorderline(type1Percent, type2Percent) {
            return Math.abs(type1Percent - type2Percent) <= 30;
        }

        // ë Œë” í•¨ìˆ˜ë“¤
        function renderHome() {
            return `
                <div class="card">
                    <h1 class="home-title">ğŸ¨ ê·€ì—¬ìš´ MBTI í…ŒìŠ¤íŠ¸ âœ¨</h1>
                    <p class="home-subtitle">ë‚˜ì˜ ì„±ê²© ìœ í˜•ì„ ë” ì •í™•í•˜ê²Œ ì•Œì•„ë³´ì„¸ìš”!</p>
                    
                    <div class="feature-cards">
                        <div class="feature-card">
                            <div class="feature-emoji">âš¡</div>
                            <h3>ë¹ ë¥¸ í…ŒìŠ¤íŠ¸</h3>
                            <p>25ê°œ ì§ˆë¬¸ìœ¼ë¡œ<br/>5ë¶„ ì™„ì„±!</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-emoji">ğŸ¯</div>
                            <h3>ì •ë°€í•œ ë¶„ì„</h3>
                            <p>3ë‹¨ê³„ ì„ íƒìœ¼ë¡œ<br/>ì •í™•ë„ í–¥ìƒ!</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-emoji">ğŸ’•</div>
                            <h3>ê¶í•© ì²´í¬</h3>
                            <p>ë‚˜ì™€ ì˜ ë§ëŠ”<br/>ìœ í˜• ì°¾ê¸°</p>
                        </div>
                    </div>

                    <button class="btn" onclick="startTest()">
                        í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸° ğŸš€
                    </button>
                </div>
            `;
        }

        function renderTest() {
            const question = questions[currentQuestion];
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            
            return `
                <div class="card" data-question="${currentQuestion}">
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div class="progress-text">${currentQuestion + 1} / ${questions.length}</div>
                    
                    <div class="question-number">Q${currentQuestion + 1}</div>
                    <h2 class="question-text">${question.question}</h2>
                    
                    <div class="options-container">
                        ${question.options.map((option, index) => `
                            <button class="option-btn" data-index="${index}" onclick="selectAnswer(${option.value}, event)">
                                <span class="option-emoji">${option.emoji}</span>
                                <span>${option.text}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderResult() {
            const mbtiType = calculateMBTI(answers);
            const result = mbtiResults[mbtiType];
            
            if (!isPremium) {
                return renderBasicResult(mbtiType, result);
            } else {
                return renderPremiumResult(mbtiType, result);
            }
        }

        function renderBasicResult(mbtiType, result) {
            return `
                <div class="card">
                    <div class="basic-result">
                        <h1 class="result-announcement">ğŸ‰ ë‹¹ì‹ ì€...</h1>
                        <div class="result-type-badge" style="background: ${result.color}">
                            <span class="result-emoji">${result.emoji}</span>
                            <span class="result-type">${mbtiType}</span>
                        </div>
                        <h2 class="result-title">${result.title}</h2>
                        <p class="result-description">${result.description}</p>
                    </div>

                    <div class="unlock-section">
                        <h3 class="unlock-title">ğŸ”’ ë” ìì„¸í•œ ê²°ê³¼ ë³´ê¸°</h3>
                        <p style="color: var(--text-light); margin-bottom: 20px;">
                            15ì´ˆ ê´‘ê³ ë¥¼ ì‹œì²­í•˜ê³  í”„ë¦¬ë¯¸ì—„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”!
                        </p>
                        
                        <div class="unlock-features">
                            <div class="unlock-feature-item">
                                <span class="unlock-icon">ğŸ“Š</span>
                                <div>
                                    <strong>ì„±í–¥ ë¶„ì„ ê·¸ë˜í”„</strong>
                                    <p style="font-size: 0.9rem; color: var(--text-light); margin: 0;">ê° ì°¨ì›ë³„ ì •í™•í•œ ì ìˆ˜ í™•ì¸</p>
                                </div>
                            </div>
                            <div class="unlock-feature-item">
                                <span class="unlock-icon">âœ¨</span>
                                <div>
                                    <strong>ìƒì„¸ íŠ¹ì§• ë¶„ì„</strong>
                                    <p style="font-size: 0.9rem; color: var(--text-light); margin: 0;">ë‚˜ì˜ ì„±ê²©ì„ ê¹Šì´ ìˆê²Œ íŒŒì•…</p>
                                </div>
                            </div>
                            <div class="unlock-feature-item">
                                <span class="unlock-icon">ğŸ’ª</span>
                                <div>
                                    <strong>ê°•ì  & ì•½ì </strong>
                                    <p style="font-size: 0.9rem; color: var(--text-light); margin: 0;">ë‚˜ë¥¼ ë°œì „ì‹œí‚¤ëŠ” ë°©ë²•</p>
                                </div>
                            </div>
                            <div class="unlock-feature-item">
                                <span class="unlock-icon">ğŸ’•</span>
                                <div>
                                    <strong>ê¶í•© ë¶„ì„</strong>
                                    <p style="font-size: 0.9rem; color: var(--text-light); margin: 0;">ë‚˜ì™€ ì˜ ë§ëŠ” ìœ í˜• ì°¾ê¸°</p>
                                </div>
                            </div>
                        </div>

                        <button class="premium-unlock-btn" onclick="showAdModal()">
                            ğŸ ê´‘ê³  ë³´ê³  ìƒì„¸ ê²°ê³¼ ë³´ê¸°
                        </button>
                    </div>

                    <div class="action-buttons" style="margin-top: 40px;">
                        <button class="btn-secondary" onclick="shareResult('${mbtiType}')">
                            ê³µìœ í•˜ê¸° ğŸ”—
                        </button>
                        <button class="btn" onclick="restart()">
                            ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° ğŸ”„
                        </button>
                    </div>
                </div>
            `;
        }

        function renderPremiumResult(mbtiType, result) {
            const percentages = getPercentages();
            
            const eiTypes = mbtiType[0] === 'E' ? ['E', 'I'] : ['I', 'E'];
            const snTypes = mbtiType[1] === 'S' ? ['S', 'N'] : ['N', 'S'];
            const tfTypes = mbtiType[2] === 'T' ? ['T', 'F'] : ['F', 'T'];
            const jpTypes = mbtiType[3] === 'J' ? ['J', 'P'] : ['P', 'J'];
            
            const borderlines = [];
            if (isBorderline(percentages[eiTypes[0]], percentages[eiTypes[1]])) borderlines.push('E/I');
            if (isBorderline(percentages[snTypes[0]], percentages[snTypes[1]])) borderlines.push('S/N');
            if (isBorderline(percentages[tfTypes[0]], percentages[tfTypes[1]])) borderlines.push('T/F');
            if (isBorderline(percentages[jpTypes[0]], percentages[jpTypes[1]])) borderlines.push('J/P');
            
            return `
                <div class="card">
                    <span class="premium-badge">âœ¨ í”„ë¦¬ë¯¸ì—„ ê²°ê³¼</span>
                    
                    <div class="result-header">
                        <h1 class="result-announcement">ğŸ‰ ë‹¹ì‹ ì€...</h1>
                        <div class="result-type-badge" style="background: ${result.color}">
                            <span class="result-emoji">${result.emoji}</span>
                            <span class="result-type">${result.type}</span>
                        </div>
                        ${borderlines.length > 0 ? `<span class="borderline-badge">ê²½ê³„í˜•: ${borderlines.join(', ')}</span>` : ''}
                        <h2 class="result-title">${result.title}</h2>
                        <p class="result-description">${result.description}</p>
                    </div>

                    <div class="score-section">
                        <h3 class="section-title">ğŸ“Š ì„±í–¥ ë¶„ì„</h3>
                        
                        <div class="score-item">
                            <div class="score-header">
                                <span>ì™¸í–¥í˜•(E)</span>
                                <span>ë‚´í–¥í˜•(I)</span>
                            </div>
                            <div class="score-bar-container">
                                <span class="score-label">${percentages.E}%</span>
                                <div class="score-bar">
                                    <div class="score-bar-fill" style="width: ${percentages.E}%">${percentages.E}%</div>
                                </div>
                                <span class="score-label">${percentages.I}%</span>
                            </div>
                        </div>

                        <div class="score-item">
                            <div class="score-header">
                                <span>ê°ê°í˜•(S)</span>
                                <span>ì§ê´€í˜•(N)</span>
                            </div>
                            <div class="score-bar-container">
                                <span class="score-label">${percentages.S}%</span>
                                <div class="score-bar">
                                    <div class="score-bar-fill" style="width: ${percentages.S}%">${percentages.S}%</div>
                                </div>
                                <span class="score-label">${percentages.N}%</span>
                            </div>
                        </div>

                        <div class="score-item">
                            <div class="score-header">
                                <span>ì‚¬ê³ í˜•(T)</span>
                                <span>ê°ì •í˜•(F)</span>
                            </div>
                            <div class="score-bar-container">
                                <span class="score-label">${percentages.T}%</span>
                                <div class="score-bar">
                                    <div class="score-bar-fill" style="width: ${percentages.T}%">${percentages.T}%</div>
                                </div>
                                <span class="score-label">${percentages.F}%</span>
                            </div>
                        </div>

                        <div class="score-item">
                            <div class="score-header">
                                <span>íŒë‹¨í˜•(J)</span>
                                <span>ì¸ì‹í˜•(P)</span>
                            </div>
                            <div class="score-bar-container">
                                <span class="score-label">${percentages.J}%</span>
                                <div class="score-bar">
                                    <div class="score-bar-fill" style="width: ${percentages.J}%">${percentages.J}%</div>
                                </div>
                                <span class="score-label">${percentages.P}%</span>
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 40px;">
                        <h3 class="section-title">âœ¨ ì£¼ìš” íŠ¹ì§•</h3>
                        ${result.characteristics.map(char => `
                            <div class="characteristic-item">
                                <span class="check-icon">âœ“</span>
                                ${char}
                            </div>
                        `).join('')}
                    </div>

                    <div style="margin-bottom: 40px;">
                        <h3 class="section-title">ğŸ’ª ê°•ì </h3>
                        <div class="tags-container">
                            ${result.strengths.map(s => `
                                <span class="tag strength-tag">${s}</span>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 40px;">
                        <h3 class="section-title">ğŸ“Œ ì•½ì </h3>
                        <div class="tags-container">
                            ${result.weaknesses.map(w => `
                                <span class="tag weakness-tag">${w}</span>
                            `).join('')}
                        </div>
                    </div>

                    <div style="margin-bottom: 40px;">
                        <h3 class="section-title">ğŸ’• ì˜ ë§ëŠ” ìœ í˜•</h3>
                        ${result.compatibility.map(type => {
                            const compatResult = mbtiResults[type];
                            return `
                                <div class="compatibility-item">
                                    <span class="compat-emoji">${compatResult.emoji}</span>
                                    <span class="compat-type">${type}</span>
                                    <span class="compat-title">${compatResult.title}</span>
                                </div>
                            `;
                        }).join('')}
                    </div>

                    <div class="action-buttons">
                        <button class="btn-secondary" onclick="shareResult('${mbtiType}')">
                            ê³µìœ í•˜ê¸° ğŸ”—
                        </button>
                        <button class="btn" onclick="restart()">
                            ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸° ğŸ”„
                        </button>
                    </div>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            
            // âœ… ì¤‘ìš”: DOM êµì²´ ì „ì— ê¸°ì¡´ ë²„íŠ¼ ì •ë¦¬ (ëª¨ë°”ì¼ Safari ëŒ€ì‘)
            if (currentPage === 'test') {
                const oldButtons = document.querySelectorAll('.option-btn');
                oldButtons.forEach(btn => {
                    btn.classList.remove('selected');
                    btn.removeAttribute('style');
                });
            }
            
            // DOM ì™„ì „ êµì²´
            app.innerHTML = `<div class="container">${
                currentPage === 'home' ? renderHome() :
                currentPage === 'test' ? renderTest() :
                currentPage === 'ad' ? renderAdModal() :
                renderResult()
            }</div>`;
        }

        function renderAdModal() {
            const progress = ((15 - adCountdown) / 15) * 100;
            
            return `
                <div class="ad-modal">
                    <div class="ad-content">
                        <div class="ad-title">ğŸ“º ê´‘ê³  ì‹œì²­ ì¤‘...</div>
                        <p class="ad-description">
                            ${adCountdown > 0 ? 'ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”!' : 'ê´‘ê³  ì‹œì²­ ì™„ë£Œ! ğŸ‰'}
                        </p>
                        
                        ${adCountdown > 0 ? `
                            <div class="ad-countdown">${adCountdown}</div>
                            <div class="ad-progress-bar">
                                <div class="ad-progress-fill" style="width: ${progress}%"></div>
                            </div>
                            <p style="color: var(--text-light); font-size: 0.9rem;">
                                í”„ë¦¬ë¯¸ì—„ ê²°ê³¼ë¥¼ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...
                            </p>
                        ` : `
                            <div style="font-size: 4rem; margin: 30px 0;">âœ…</div>
                            <button class="btn" onclick="unlockPremium()">
                                í”„ë¦¬ë¯¸ì—„ ê²°ê³¼ ë³´ê¸° ğŸ
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function showAdModal() {
            currentPage = 'ad';
            adCountdown = 15;
            render();
            startAdCountdown();
        }

        function startAdCountdown() {
            const interval = setInterval(() => {
                adCountdown--;
                
                const countdownEl = document.querySelector('.ad-countdown');
                const progressEl = document.querySelector('.ad-progress-fill');
                
                if (adCountdown > 0) {
                    if (countdownEl) countdownEl.textContent = adCountdown;
                    if (progressEl) {
                        const progress = ((15 - adCountdown) / 15) * 100;
                        progressEl.style.width = progress + '%';
                    }
                } else {
                    clearInterval(interval);
                    render();
                }
            }, 1000);
        }

        function unlockPremium() {
            isPremium = true;
            currentPage = 'result';
            render();
        }

        function startTest() {
            currentPage = 'test';
            currentQuestion = 0;
            answers = [];
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            isProcessing = false;
            render();
        }

        function selectAnswer(value, event) {
            if (isProcessing) return;
            isProcessing = true;
            
            // CSS í´ë˜ìŠ¤ë¡œ ì‹œê°ì  í”¼ë“œë°±
            if (event && event.currentTarget) {
                const btn = event.currentTarget;
                btn.classList.add('selected');
                // ëª¨ë°”ì¼ Safari: focus/active ìƒíƒœ ì œê±°
                btn.blur();
            }
            
            answers.push(value);
            
            // ëª¨ë°”ì¼ Safarië¥¼ ìœ„í•´ ì¡°ê¸ˆ ë” ê¸´ ì§€ì—° (200ms)
            setTimeout(() => {
                if (currentQuestion < questions.length - 1) {
                    currentQuestion++;
                    render();
                    isProcessing = false;
                } else {
                    currentPage = 'result';
                    render();
                    isProcessing = false;
                }
            }, 200);
        }

        function restart() {
            currentPage = 'home';
            currentQuestion = 0;
            answers = [];
            scores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };
            isPremium = false;
            adCountdown = 15;
            isProcessing = false;
            render();
        }

        function shareResult(mbtiType) {
            const result = mbtiResults[mbtiType];
            const percentages = getPercentages();
            const shareText = `ë‚˜ì˜ MBTIëŠ” ${result.type} - ${result.title}! ${result.emoji}

E/I: ${percentages[mbtiType[0]]}%
S/N: ${percentages[mbtiType[1]]}%
T/F: ${percentages[mbtiType[2]]}%
J/P: ${percentages[mbtiType[3]]}%

ê·€ì—¬ìš´ MBTI í…ŒìŠ¤íŠ¸ (3ì  ì²™ë„ ì •ë°€ ë²„ì „)`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ê·€ì—¬ìš´ MBTI í…ŒìŠ¤íŠ¸',
                    text: shareText
                }).catch(() => {});
            } else {
                navigator.clipboard.writeText(shareText);
                alert('ê²°ê³¼ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
            }
        }

        render();
    </script>
</body>
</html>